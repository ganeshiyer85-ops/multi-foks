<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Face Capture with Virtual Try-On</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
    <!-- LINKING THE CSS FILE HERE -->
    <link rel="stylesheet" href="style.css">
    <script type="module" src="js/script.js"></script>

  </head>
  <body>
    <div class="container">
      <h1>ğŸ“¸ Smart Face Capture & Virtual Try-On</h1>

      <div id="step1" class="step-container active">
        <div class="instructions">
          <h3>ğŸ“‹ Quick Instructions</h3>
          <ul>
            <li>Position your face within the oval guide</li>
            <li>Keep your head straight and centered</li>
            <li>Ensure good lighting on your face</li>
            <li>System will auto-capture when aligned</li>
            <li>Hold still during the capture countdown</li>
          </ul>
        </div>

        <div class="camera-container" id="cameraContainer">
          <video id="videoElement" autoplay muted playsinline></video>
          <canvas id="captureCanvas"></canvas>

          <div class="overlay">
            <div class="face-guide-oval" id="faceGuide"></div>

            <div class="alignment-status" id="alignmentStatus">
              Click "Start Camera" to begin
            </div>

            <div class="countdown" id="countdown"></div>

            <div class="progress-container" id="progressContainer">
              <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
              </div>
              <div class="progress-text" id="progressText">
                Hold Still - Capturing...
              </div>
            </div>
          </div>
        </div>

        <div class="controls">
          <button class="start-btn" id="startBtn" onclick="app.startCamera()">
          Start Camera
        </button>
        </div>

        <div class="error-message" id="errorMessage"></div>
      </div>

      <div id="step2" class="step-container">
        <h2 style="text-align: center; margin-bottom: 20px">
          ğŸ¯ Try Virtual Eyeglasses
        </h2>

        <div class="result-container" style="margin-bottom: 30px">
          <canvas id="overlayCanvas"></canvas>
        </div>

        <div class="frame-selector" id="frameSelector"></div>

        <div class="adjustment-controls">
          <div class="slider-group">
            <div class="slider-label">
              <span>â†•ï¸ Vertical Position</span>
              <span class="slider-value" id="verticalValue">0</span>
            </div>
            <input
              type="range"
              id="verticalSlider"
              min="-50"
              max="50"
              value="0"
            />
          </div>

          <div class="slider-group">
            <div class="slider-label">
              <span>ğŸ“ Frame Size</span>
              <span class="slider-value" id="sizeValue">100%</span>
            </div>
            <input
              type="range"
              id="sizeSlider"
              min="60"
              max="200"
              value="100"
            />
          </div>

          <div class="slider-group">
            <div class="slider-label">
              <span>ğŸ”„ Rotation</span>
              <span class="slider-value" id="rotationValue">0Â°</span>
            </div>
            <input
              type="range"
              id="rotationSlider"
              min="-10"
              max="10"
              value="0"
              step="0.5"
            />
          </div>

          <button
            onclick="app.resetAdjustments()"
            class="retake-btn"
            style="width: 100%; margin-top: 10px"
          >
            Reset Position
          </button>
        </div>

        <div class="measurements-panel">
          <h3 style="margin: 0 0 15px 0; color: #333">
            ğŸ“ Precise Face Measurements
          </h3>

          <div class="measurement-section">
            <div class="measurement-section-title">Pupillary Distance (PD)</div>
            <div class="measurement-row">
              <span class="measurement-label">ğŸ‘ï¸ Total PD</span>
              <span class="measurement-value" id="pdTotalMeasurement"
                >-- mm</span
              >
            </div>
            <div class="measurement-row">
              <span class="measurement-label">â—€ï¸ Left PD</span>
              <span class="measurement-value" id="pdLeftMeasurement"
                >-- mm</span
              >
            </div>
            <div class="measurement-row">
              <span class="measurement-label">â–¶ï¸ Right PD</span>
              <span class="measurement-value" id="pdRightMeasurement"
                >-- mm</span
              >
            </div>
          </div>

          <div class="measurement-section">
            <div class="measurement-section-title">Nose-to-Eye Distances</div>
            <div class="measurement-row">
              <span class="measurement-label">ğŸ‘ƒ Left Nose Distance</span>
              <span class="measurement-value" id="leftNoseMeasurement"
                >-- mm</span
              >
            </div>
            <div class="measurement-row">
              <span class="measurement-label">ğŸ‘ƒ Right Nose Distance</span>
              <span class="measurement-value" id="rightNoseMeasurement"
                >-- mm</span
              >
            </div>
            <div class="measurement-row">
              <span class="measurement-label">ğŸ‘ƒ Total Nose Distance</span>
              <span class="measurement-value" id="totalNoseMeasurement"
                >-- mm</span
              >
            </div>
          </div>

          <div class="measurement-section">
            <div class="measurement-section-title">Frame Fitting</div>
            <div class="measurement-row">
              <span class="measurement-label">ğŸ“ Fitting Height</span>
              <span class="measurement-value" id="fittingHeightMeasurement"
                >-- mm</span
              >
            </div>
            <div class="measurement-row">
              <span class="measurement-label">â†”ï¸ Face Width</span>
              <span class="measurement-value" id="faceWidthMeasurement"
                >-- mm</span
              >
            </div>
            <div class="measurement-row">
              <span class="measurement-label">â†•ï¸ Face Height</span>
              <span class="measurement-value" id="faceHeightMeasurement"
                >-- mm</span
              >
            </div>
          </div>

          <div class="measurement-section">
            <div class="measurement-section-title">Face Analysis</div>
            <div class="measurement-row">
              <span class="measurement-label">ğŸ“Š Face Shape Ratio</span>
              <span class="measurement-value" id="faceRatioMeasurement"
                >--</span
              >
            </div>
            <div class="measurement-row">
              <span class="measurement-label">ğŸ­ Face Shape</span>
              <span class="measurement-value" id="faceShapeMeasurement"
                >--</span
              >
            </div>
          </div>
        </div>

        <div class="controls">
          <button class="download-btn" onclick="app.downloadImage()">
            Download Image
          </button>
          <button class="retake-btn" onclick="app.retake()">
            Retake Photo
          </button>
        </div>
      </div>
    </div>
    
  </body>
  </html>
<script>

</script>
